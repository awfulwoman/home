---
- name: Home Automation Server - dev
  hosts: homeautomation
  pre_tasks:
    - set_fact:
       compose_list: []
  roles:
    - role: containers-config
    - role: container-watchtower
    - role: container-whoami
    - role: container-homeassistant
    - role: container-esphome
    - role: container-mosquitto
    - role: container-uptimekuma
    # - role: container-heimdall
    - role: container-zigbee2mqtt # Core Zigbee network
    - role: container-zigbee2mqtt-aqara # Sandboxed Zigbee network for Aqara/Xiaomi devices
    - role: container-traefik
    - role: containers-end
    - role: docker-cleanup

  handlers:
    - name: Reboot host
      become: true
      ansible.builtin.reboot:
