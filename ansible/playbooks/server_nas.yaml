---
- name: NAS
  hosts: host-x86-ladyrona
  vars:
    container_config_dir: /fastpool/containers
    backup_restic_destination: /slowpool/backups/containers
    backup_sources:
      - homeassistant
    healthcheck_url: ""
  roles:
    - role: standard_os
    - role: standard-host
    - role: healthchecks
    - role: zfs-tools
    - role: cron-reboot-weekly
    - role: containers-config
    - role: geerlingguy.docker
      become: true
    - role: geerlingguy.docker
      become: true
      when: ansible_architecture == "x86_64"
    - role: geerlingguy.docker_arm
      become: true
      when: ansible_architecture == "aarch64"
    - role: docker
    - role: jnv.unattended-upgrades
      become: true
    - role: host-bus-adapter
    - role: virtualisation-tools
    - role: motd
    - role: container-jellyfin
    - role: container-traefik
    - role: container-restic
    - role: container-sanoid-builder
    - role: apt-upgrade

  handlers:
    - name: Reboot host
      become: true
      reboot:
