- name: Ensure iSCSI is installed
  become: true
  ansible.builtin.apt:
    name:
      - open-iscsi
    state: present
    update_cache: true

- name: Ensure storage devices mounted by UUID
  become: true
  ansible.posix.mount:
    path: "{{ storage_mount }}"
    src: "UUID={{ storage_uuid }}"
    fstype: ext4
    state: mounted

- name: Ensure PSMQTT is installed
  ansible.builtin.pip:
    name: git+https://github.com/whalecoiner/psmqtt.git
