- ansible.builtin.debug:
    var: compose_list

- ansible.builtin.debug:
    msg: "{{ item }}/docker-compose.yaml"
  loop: "{{ compose_list }}"

- name: Create and start docker services
  community.docker.docker_compose:
    project_src: "{{ compose_config_dir }}"
    files: "{{ compose_list | product(['/docker-compose.yaml']) | map('join') | list }}"
      # - "{{ item }}/docker-compose.yaml"
  # loop: "{{ compose_list }}"
  
  register: compose_output

- ansible.builtin.debug:
    var: compose_output
